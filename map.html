<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Map</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/jquery.minicolors.css">
	<script src="js/jquery.min.js"></script>
	<script src="js/d3.min.js"></script>
	<script src="js/topojson.v1.min.js"></script>
</head>
<body id="map">
    <div class="container-fluid">
        <div class="row-fluid">
        	<!-- 左侧工具栏 -->
            <div id="sidebarLeft" class="col-md-2">
                <div class="well sidebar-nav">
                    <div id="workspace" style="overflow: scroll">
                        <div class="form-group" id="type1" style="display: none;">
                        	<div>
                        		<span>面板背景色：</span>
                            	<input type="text" class="colorPick bgColor" value="#F7F7F7" data-format="rgb">
                        	</div>
                        	<div>
                        		<span>地图背景色：</span>
                            	<input type="text" class="colorPick mapColor" value="#CCCCCC" data-format="rgb">
                        	</div>
                            <input type="button" value="重置地图" class="btn reset">                          
                        </div>
                        <div class="form-group" id="type2" style="display: none;">
                            <div>
                                <span>面板背景色：</span>
                                <input type="text" class="colorPick bgColor" value="#F7F7F7" data-format="rgb">
                            </div>
                            <div><p>最大值对应的颜色：</p><input type="text" class="colorPick" value="#016FDD"></div>
                            <div><p>最小值对应的颜色：</p><input type="text" class="colorPick" value="#F7F7F7"></div>
                            <input type="button" value="重置地图" class="btn reset">
                        </div>
                        <div class="form-group" id="type3" style="display: none;">
                            <div>
                                <span>面板背景色：</span>
                                <input type="text" class="colorPick bgColor" value="#F7F7F7" data-format="rgb">
                            </div>
                            <div>
                                <span>地图背景色：</span>
                                <input type="text" class="colorPick mapColor" value="#CCCCCC" data-format="rgb">
                            </div>
                            <div><span>分段级数：</span>
	                            <select>
								  <option value ="1">1&nbsp;&nbsp;级</option>
								  <option value ="2" selected>2&nbsp;&nbsp;级</option>
								  <option value="3">3&nbsp;&nbsp;级</option>
								  <option value="4">4&nbsp;&nbsp;级</option>
								  <option value="5">5&nbsp;&nbsp;级</option>
								</select>
							</div>
                            <div class="moreColor">
                                <input type="text" class="colorPick" value="#016FDD">
                                <input type="text" class="colorPick" value="#CC0000">
                                <input type="text" class="colorPick">
                                <input type="text" class="colorPick">
                                <input type="text" class="colorPick">
                            </div>
                            <div><span>透明度：</span><input type="range" value="0.8" class="opacity" max="1" min="0" step="0.1"></div>
                            <input type="button" value="重置地图" class="btn reset">
                        </div>
                        <div class="form-group" id="type4" style="display: none;">
                            <div>
                                <span>面板背景色：</span>
                                <input type="text" class="colorPick bgColor" value="#F7F7F7" data-format="rgb">
                            </div>
                            <div>
                                <span>地图背景色：</span>
                                <input type="text" class="colorPick mapColor" value="#CCCCCC" data-format="rgb">
                            </div>
                            <div><span>柱状宽度：</span><input type="text" value="12" class="barWidth"></div>
                            <div><span>柱状最大高度：</span><input type="text" value="50" class="maxBarHeight"></div>
                            <div><span>柱状颜色：</span> <input type="text" class="colorPick barColor" value="#016FDD"></div>
                            <div><span>透明度：</span><input type="range" value="0.8" class="opacity" max="1" min="0" step="0.1"></div>
                            <input type="button" value="重置地图" class="btn reset">
                        </div>
                        <div class="form-group" id="type5" style="display: none;">
                            <div>
                                <span>面板背景色：</span>
                                <input type="text" class="colorPick bgColor" value="#F7F7F7" data-format="rgb">
                            </div>
                            <div>
                                <span>地图背景色：</span>
                                <input type="text" class="colorPick mapColor" value="#CCCCCC" data-format="rgb">
                            </div>
                            <div>
                                <span>名称点填充色：</span>
                                <input type="text" class="colorPick pointColor" value="#000000" data-format="rgb">
                            </div>
                            <div class="moreColor">
                                <span>每列数值对应的颜色：</span>
                                <input type="text" class="colorPick" value="#FF4040">
                                <input type="text" class="colorPick" value="#EEC900">
                                <input type="text" class="colorPick" value="#D1EEEE">
                                <input type="text" class="colorPick" value="#A020F0">
                                <input type="text" class="colorPick" value="#87CEEB">
                                <input type="text" class="colorPick" value="#7CCD7C">
                                <input type="text" class="colorPick" value="#EE9A00">
                                <input type="text" class="colorPick" value="#A0522D">
                            <input type="button" value="重置地图" class="btn reset">
                            </div>
                        </div>
                        <div class="form-group" id="type6" style="display: none;">
                            <div>
                                <span>面板背景色：</span>
                                <input type="text" class="colorPick bgColor" value="#F7F7F7" data-format="rgb">
                            </div>
                            <div>
                                <span>地图背景色：</span>
                                <input type="text" class="colorPick mapColor" value="#CCCCCC" data-format="rgb">
                            </div>
                            <div>
                                <span>名称点填充色：</span>
                                <input type="text" class="colorPick pointColor" value="#000000" data-format="rgb">
                            </div>
                           <div><span>柱状最大高度：</span><input type="text" value="90" class="maxBarHeight"></div>
                           <div class="moreColor">
                                <span>每列数值对应的颜色：</span>
                                <input type="text" class="colorPick" value="#FF4040">
                                <input type="text" class="colorPick" value="#EEC900">
                                <input type="text" class="colorPick" value="#D1EEEE">
                                <input type="text" class="colorPick" value="#A020F0">
                                <input type="text" class="colorPick" value="#87CEEB">
                                <input type="text" class="colorPick" value="#7CCD7C">
                                <input type="text" class="colorPick" value="#EE9A00">
                                <input type="text" class="colorPick" value="#A0522D">
                            </div>
                            <input type="button" value="重置地图" class="btn reset">
                        </div>
                         <button type="button" class="btn btn-sm" id="save">存为图片</button>
                    </div>
                </div>
            </div>
            <!-- 中部绘图区 -->
            <div id="graphic" class="col-md-7">
                <div id="main" class="main"></div>
            </div>
            <!-- 右侧数据显示区 -->
            <div id="sidebarRight" class="col-md-3">
                <div class="well sidebar-nav">
                    <div id="table" class="table-responsive" style="overflow: scroll;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 提示框 -->
	<div id="tooltip" class="hidden">
	    <div><strong id="data-name"></strong> <span id="data-name-tooltip"></span></div>
	    <div><strong id="data-value">:</strong> <span id="data-value-tooltip"></span></div>
	</div>
</div>

<script>
	function GetRequest() {
	    var url = decodeURI(location.search); 
	    var theRequest = new Object();
	    if (url.indexOf("?") != -1) {
	        var str = url.substr(1);
	        strs = str.split("&");
	        for(var i = 0; i < strs.length; i ++) {
	           theRequest[strs[i].split("=")[0]]=(strs[i].split("=")[1]);
	        }
	    }
	   return theRequest;
	}
	$(function(){
		var request =  new Object();
		request = GetRequest();
		csv = request["data"];
		type = request["type"];
		csvdata = d3.csv.parse(csv);
		showTable();
	});
	
	</script>
	<script src="js/fileSaver.min.js"></script>
	<script src="js/canvas-toBlob.js"></script>
	<script src="js/jquery.minicolors.min.js"></script>
	<script src="js/main.js"></script>
</body>
</html>